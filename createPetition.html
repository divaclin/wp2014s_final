<!--header要include:-->
   <link rel="stylesheet" href="css/fancybox/source/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
   <script type="text/javascript" src="css/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
   <script type="text/javascript" src="css/fancybox/source/jquery.fancybox.js"></script>
   <link rel="stylesheet" type="text/css" href="create.css">


<!--可以click建立連署的地方-->
<a href="#inline" data-bb="alert_callback" class="create-petition">建立連署</a>



<!--code開始～-->
<div id="inline">
      <!--form裡的action="URL" : where to send the form-data when a form is submitted-->
      <form name="Create_petition" id="Create_petition" action="" onsubmit="return validateForm()" method="post">
        <div id="Title"> <!--連署標題-->
          <i class="icon-ok"></i>&nbsp;連署標題
          <input type="text" name="petition-title" id="petition-title">
        </div>

        <div id="Unit"> <!--發起單位-->
          <i class="icon-ok"></i>&nbsp;發起單位
          <input type="text" name="petition-unit" id="petition-unit">
        </div>

        <div id="Category"> <!--類別選單-->
          <i class="icon-ok"></i>&nbsp;類別
          <select name="category" id="category">
            <option value="default">請選擇</option>
            <option value="politics-and-economics">政治經濟</option>
            <option value="education-and-culture">教育文化</option>
            <option value="environment-and-land">環保土地</option>
            <option value="livelihood">民生</option>
            <option value="labor">勞工</option>
            <option value="others">其他</option>
          </select>
        </div>

        <div id="Intro"> <!--連署事件簡介-->
          <i class="icon-ok"></i>&nbsp;連署事件簡介
          <textarea name="petition-intro" id="petition-intro" rows="10" cols="50"></textarea>
        </div>

        <div id="Content"> <!--聲明內容-->
          <i class="icon-ok"></i>&nbsp;聲明內容
          <textarea name="petition-text" id="petition-text" rows="10" cols="50"></textarea>
        </div>

        <!--連署目標人數，連署照片上傳-->
        <div id="People"> <!--連署目標人數 target-->
          <i class="icon-ok"></i>&nbsp;目標人數
          <input type="text" name="petition-people" id="petition-people">
        </div>

        <div id="Picture"> <!--連署圖片上傳-->
          <i class="icon-ok"></i>&nbsp;連署圖片
        </div>

        <div id="Timeline"> <!--連署事件時間軸-->
          &nbsp;&nbsp;&nbsp;連署重大事件
          <div class="T">
            <div class="t">1. <input type="text" name="timeline-1" id="timeline-1"></div>
            <div class="t">2. <input type="text" name="timeline-2" id="timeline-2"></div>
            <div class="t">3. <input type="text" name="timeline-3" id="timeline-3"></div>
            <div class="t">4. <input type="text" name="timeline-4" id="timeline-4"></div>
          </div>
        </div>

        <div id="Button" class="btn-group"> <!--建立的按鈕-->
          <button class="btn" id="create_btn">建 立</button>
        </div>
      </form>
    </div>
    <script type="text/javascript">
    $(document).ready(function() {
      $(".create-petition").fancybox();
      $("#Create_petition").submit(function() { return false; });

    
      $("#create-button").on("click", function(){
        console.log("now u click on the join btn.");

          var title = document.forms["Form"]["petition-title"].value;
          var unit = document.forms["Form"]["petition-unit"].value;
          var category = document.forms["Form"]["category"].value;
          var intro = document.forms["Form"]["petition-intro"].value;
          var txt = document.forms["Form"]["petition-text"].value;
          var people = document.forms["Form"]["petition-people"].value;

          if (title == null || title == "") {
            alert("請輸入連署標題");
            return false;
          } else if (unit == null || unit == "") {
            alert("請輸入發起單位");
            return false;
          } else if (category == 'default') {
            alert("請選擇分類");
            return false;
          } else if (intro == null || intro == "") {
            alert("請輸入連署事件簡介");
            return false;
          } else if (txt == null || txt == "") {
            alert("請輸入聲明內容");
            return false;
          } else if (people == null || people == "") {
            alert("請輸入目標人數");
            return false;
          } else {
            $("#create-button").replaceWith("<em>建立中</em>");
  
            $.ajax({
              type: 'POST',
              url: '',
              data: $("#Create_petition").serialize(),
              success: function(data) {
                if(data == "true") {
                  $("#Create_petition").fadeOut("fast", function(){
                    $(this).before("<p><strong>您已成功建立連署囉 ^_^! </strong></p>");
                    setTimeout("$.fancybox.close()", 1000);
                  });
                }
              }
            });
          }

    </script>
